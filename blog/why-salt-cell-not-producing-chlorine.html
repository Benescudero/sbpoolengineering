<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Why Your Salt Cell Isn't Producing Chlorine — And How to Fix It for Good | SB Pool Engineering</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Discover why your salt cell stopped producing chlorine and learn proven fixes. Plus, how Cell Shield prevents this $800+ problem from happening again.">
    <meta name="keywords" content="salt cell not producing chlorine, salt cell not working, why isn't my salt cell working, salt cell troubleshooting, salt cell repair, salt cell not generating chlorine">
    <meta name="author" content="SB Pool Engineering">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.shieldbearer3dp.com/blog/why-salt-cell-not-producing-chlorine.html">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Why Your Salt Cell Isn't Producing Chlorine — And How to Fix It">
    <meta property="og:description" content="Discover why your salt cell stopped producing chlorine and learn proven fixes. Plus, how Cell Shield prevents this $800+ problem.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.shieldbearer3dp.com/blog/why-salt-cell-not-producing-chlorine.html">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Why Your Salt Cell Isn't Producing Chlorine — And How to Fix It for Good",
        "description": "Discover why your salt cell stopped producing chlorine and learn proven fixes. Plus, how Cell Shield prevents this $800+ problem from happening again.",
        "image": "https://www.shieldbearer3dp.com/cellshield.png",
        "author": {
            "@type": "Organization",
            "name": "SB Pool Engineering"
        },
        "publisher": {
            "@type": "Organization",
            "name": "SB Pool Engineering",
            "logo": {
                "@type": "ImageObject",
                "url": "https://www.shieldbearer3dp.com/cellshield.png"
            }
        },
        "datePublished": "2024-12-01",
        "dateModified": "2024-12-01",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://www.shieldbearer3dp.com/blog/why-salt-cell-not-producing-chlorine.html"
        }
    }
    </script>
    
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        .blog-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.8;
        }
        .blog-header {
            margin-bottom: 2rem;
        }
        .blog-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        .blog-meta {
            color: #64748b;
            font-size: 0.9rem;
            margin-bottom: 2rem;
        }
        .blog-content h2 {
            font-size: 1.8rem;
            color: #1e3a8a;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        .blog-content h3 {
            font-size: 1.4rem;
            color: #334155;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        .blog-content p {
            margin-bottom: 1.5rem;
            color: #334155;
        }
        .blog-content ul, .blog-content ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }
        .blog-content li {
            margin-bottom: 0.75rem;
            color: #334155;
        }
        .product-showcase {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            border: 2px solid #e0e7ff;
            border-radius: 16px;
            padding: 2.5rem;
            margin: 3rem 0;
            box-shadow: 0 8px 25px rgba(30, 58, 138, 0.1);
        }
        .product-showcase h3 {
            color: #1e3a8a;
            margin-top: 0;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        .product-showcase-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }
        .product-showcase-image {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .product-showcase-image img {
            width: 100%;
            height: auto;
            display: block;
        }
        .product-showcase-info {
            display: flex;
            flex-direction: column;
        }
        .product-showcase-info p {
            margin-bottom: 1.5rem;
            color: #334155;
            line-height: 1.7;
        }
        .product-showcase-price {
            font-size: 2rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }
        .product-showcase-shipping {
            color: #64748b;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }
        .product-showcase-btn {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
        }
        .product-showcase-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30, 58, 138, 0.4);
            background: linear-gradient(135deg, #1e40af 0%, #2563eb 100%);
        }
        .product-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .product-feature {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #334155;
            font-size: 0.95rem;
        }
        .product-feature i {
            color: #1e3a8a;
            font-size: 1.2rem;
        }
        .blog-image {
            width: 100%;
            border-radius: 12px;
            margin: 2rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .blog-shipping-calculator input {
            border: 2px solid #cbd5e1;
        }
        .blog-shipping-calculator input:focus {
            outline: none;
            border-color: #1e3a8a;
        }
        .related-articles {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            border: 2px solid #e0e7ff;
            border-radius: 16px;
            padding: 2.5rem;
            margin: 3rem 0;
            box-shadow: 0 8px 25px rgba(30, 58, 138, 0.1);
        }
        .related-articles-title {
            color: #1e3a8a;
            font-size: 1.8rem;
            margin-top: 0;
            margin-bottom: 2rem;
            text-align: center;
        }
        .related-articles-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }
        .related-article-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 1.5rem;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .related-article-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.2);
            border-color: #1e3a8a;
        }
        .related-article-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            color: white;
            font-size: 1.5rem;
        }
        .related-article-card h4 {
            color: #1e3a8a;
            margin: 0 0 0.75rem 0;
            font-size: 1.1rem;
            font-weight: 600;
        }
        .related-article-card p {
            color: #64748b;
            margin: 0;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        .back-link {
            display: inline-block;
            color: #1e3a8a;
            text-decoration: none;
            margin-bottom: 2rem;
            font-weight: 500;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            .blog-container {
                padding: 1rem;
            }
            .blog-title {
                font-size: 1.75rem;
                line-height: 1.3;
            }
            .blog-content h2 {
                font-size: 1.5rem;
                margin-top: 2rem;
            }
            .blog-content h3 {
                font-size: 1.25rem;
            }
            .blog-image {
                margin: 1.5rem 0;
            }
            .product-showcase {
                padding: 1.5rem;
                margin: 2rem 0;
            }
            .product-showcase h3 {
                font-size: 1.5rem;
            }
            .product-showcase-content {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            .product-features {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            .product-showcase-btn {
                width: 100%;
                padding: 0.875rem 1.5rem;
                font-size: 1rem;
            }
            .related-articles {
                padding: 1.5rem;
                margin: 2rem 0;
            }
            .related-articles-title {
                font-size: 1.5rem;
            }
            .related-articles-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .blog-shipping-calculator input {
                font-size: 16px; /* Prevents zoom on iOS */
            }
        }
        @media (max-width: 480px) {
            .blog-title {
                font-size: 1.5rem;
            }
            .blog-content h2 {
                font-size: 1.35rem;
            }
            .blog-content h3 {
                font-size: 1.15rem;
            }
            .product-showcase {
                padding: 1.25rem;
            }
            .related-articles {
                padding: 1.25rem;
            }
        }
    </style>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K46Z14GH67"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-K46Z14GH67');
      console.log("Analytics loaded on", window.location.pathname);
    </script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="../index.html" style="display: flex; align-items: center; text-decoration: none; color: inherit;">
                    <img src="../cellshield.png" alt="Salt Cell Shield Logo" class="logo-image">
                    <h2>SB Pool Engineering</h2>
                </a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="../index.html#home" class="nav-link">Home</a></li>
                <li class="nav-item"><a href="../index.html#product" class="nav-link">Product</a></li>
                <li class="nav-item"><a href="index.html" class="nav-link">Blog</a></li>
                <li class="nav-item"><a href="../index.html#about" class="nav-link">About</a></li>
                <li class="nav-item"><a href="../index.html#contact" class="nav-link">Contact</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <div class="blog-container">
        <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Blog</a>
        
        <article class="blog-content">
            <header class="blog-header">
                <h1 class="blog-title">Why Your Salt Cell Isn't Producing Chlorine — And How to Fix It for Good</h1>
                <div class="blog-meta">
                    <span><i class="far fa-calendar"></i> December 1, 2024</span>
                    <span style="margin-left: 1rem;"><i class="far fa-clock"></i> 8 min read</span>
                </div>
            </header>

            <p>You walk out to your pool and notice the water isn't as clear as it should be. You check your salt cell chlorinator, and it's not producing chlorine. This is a problem that costs Florida pool owners an average of $800-1,000 when it leads to premature salt cell replacement. But before you panic, let's understand why this happens and how to fix it — plus, how to prevent it from happening again.</p>

            <img src="https://images.unsplash.com/photo-1572331165267-854da2b10ccc?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHN3aW1taW5nJTIwcG9vbHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=800&h=400" alt="Pool equipment pad showing salt cell chlorinator system with pump, filter, and pipes" class="blog-image">

            <h2>Common Reasons Your Salt Cell Isn't Producing Chlorine</h2>

            <p>When your salt cell stops producing chlorine, it's usually due to one of these five issues. The good news? Most of them are fixable without replacing your entire cell.</p>

            <h3>1. Scale Buildup on the Cell Plates</h3>


            <p>This is the #1 culprit in Sunbelt states like Florida, Texas, and Arizona. When calcium and other minerals accumulate on your salt cell's titanium plates, they can't efficiently generate chlorine. Think of it like trying to cook on a stove with a thick layer of grime — the heat can't transfer properly.</p>

            <p><strong>Signs of scale buildup:</strong></p>
            <ul>
                <li>White, chalky deposits visible on the cell plates</li>
                <li>Gradual decrease in chlorine production over weeks/months</li>
                <li>Your chlorinator shows "Check Salt" or "Low Salt" errors (even when salt is fine)</li>
                <li>The cell feels heavier or looks "caked" when you inspect it</li>
            </ul>

            <p><strong>How to fix it:</strong> Clean the cell with a 4:1 water-to-muriatic acid solution (always add acid to water, never the reverse). Soak for 10-15 minutes, then rinse thoroughly. However, frequent acid cleaning can damage the plates over time, which is why many pool owners use Cell Shield to prevent scale buildup in the first place.</p>

            <h3>2. High Water Temperature</h3>
            <p>In Florida and other Sunbelt states, pool water temperatures can reach 90°F+ in summer. When your salt cell operates above 95°F, it becomes less efficient at producing chlorine. The excess heat also accelerates corrosion and scale formation.</p>

            <p><strong>How to fix it:</strong> Shade your equipment pad or use a protective shield like Cell Shield, which reduces operating temperature by 10-16°F. This is especially important if your salt cell is exposed to direct sunlight.</p>

            <h3>3. Low Salt Levels</h3>
            <p>Salt cells need a specific salt concentration (typically 2,700-3,400 ppm) to generate chlorine. If your salt level drops below 2,500 ppm, the cell may stop producing chlorine entirely.</p>

            <p><strong>How to fix it:</strong> Test your salt level with a salt test strip or digital meter. If it's low, add pool salt (not table salt) to bring it to the manufacturer's recommended range. Usually, 40-50 pounds of salt per 10,000 gallons will raise the level by 1,000 ppm.</p>

            <h3>4. Cell Age and Wear</h3>

            <p>Salt cells typically last 3-5 years, but in harsh conditions (high heat, hard water, poor maintenance), they can fail in just 2-3 years. As the titanium plates degrade, they become less effective at generating chlorine.</p>

            <p><strong>Signs of cell failure:</strong></p>
            <ul>
                <li>Cell is 4+ years old and production has gradually declined</li>
                <li>Plates show visible damage, pitting, or corrosion</li>
                <li>Cleaning doesn't restore chlorine production</li>
                <li>Your chlorinator shows "Cell Life" or "Replace Cell" warnings</li>
            </ul>

            <p><strong>How to fix it:</strong> If your cell is old and cleaning doesn't help, replacement may be necessary. However, protecting a new cell with Cell Shield can extend its life by 1-2 years, making it a smart investment when replacing your cell.</p>

            <h3>5. Chemical Imbalance</h3>

            <p>High pH (above 7.8), high calcium hardness (above 400 ppm), or high cyanuric acid (above 80 ppm) can all interfere with chlorine production. These imbalances create conditions that favor scale formation and reduce cell efficiency.</p>

            <p><strong>How to fix it:</strong> Test and balance your pool water weekly. Maintain pH between 7.2-7.6, calcium hardness between 200-400 ppm, and cyanuric acid between 30-50 ppm. Regular maintenance prevents these issues from compounding.</p>

            <h2>Step-by-Step Troubleshooting Guide</h2>

            <p>Follow these steps in order to diagnose and fix your salt cell issue:</p>

            <ol>
                <li><strong>Check your salt level</strong> — Use a salt test strip. If it's below 2,500 ppm, add salt first.</li>
                <li><strong>Inspect the cell visually</strong> — Remove it from the chlorinator and look for scale buildup or damage.</li>
                <li><strong>Clean the cell</strong> — If you see scale, clean it with acid solution (wear gloves and eye protection).</li>
                <li><strong>Check water chemistry</strong> — Test pH, calcium hardness, and cyanuric acid. Balance if needed.</li>
                <li><strong>Monitor temperature</strong> — If your pool runs hot, consider shading or protecting your equipment.</li>
                <li><strong>Check cell age</strong> — If your cell is 4+ years old and cleaning doesn't help, it may be time to replace.</li>
            </ol>

            <h2>How to Prevent This Problem from Happening Again</h2>

            <p>Reactive maintenance — fixing problems after they occur — is expensive. The average salt cell replacement costs $800-1,000 in Florida. A proactive approach is much smarter.</p>

            <p>This is where Cell Shield comes in. Our professional-grade salt cell protection device addresses the two main causes of cell failure:</p>

            <ul>
                <li><strong>Scale prevention:</strong> By reducing operating temperature by 10-16°F, Cell Shield slows scale formation by 25-35%. This means fewer acid cleanings and less plate degradation.</li>
                <li><strong>Heat protection:</strong> In Florida's intense summer heat, unprotected salt cells can reach 113°F. Cell Shield keeps them at a safer 97°F, extending cell life by 1-2 years.</li>
            </ul>

            <p>Conservative estimates show that Cell Shield pays for itself by avoiding 30% of one cell replacement (at $800 average cost). That's $240 saved per 1.5 years — and the shield itself costs $199.</p>

            <div class="product-showcase">
                <h3>Protect Your Salt Cell with Cell Shield</h3>
                <div class="product-showcase-content">
                    <div class="product-showcase-image">
                        <img src="../poolproduct2.jpg" alt="Cell Shield - Professional Salt Cell Protection Device">
                    </div>
                    <div class="product-showcase-info">
                        <p>Don't wait until your cell fails. Cell Shield prevents scale buildup and temperature damage, helping your salt cell produce chlorine consistently for years longer.</p>
                        <div class="product-features">
                            <div class="product-feature">
                                <i class="fas fa-shield-alt"></i>
                                <span>Extends cell life by 1-2 years</span>
                            </div>
                            <div class="product-feature">
                                <i class="fas fa-thermometer-half"></i>
                                <span>Reduces temperature by 10-16°F</span>
                            </div>
                            <div class="product-feature">
                                <i class="fas fa-chart-line"></i>
                                <span>25-35% less scale buildup</span>
                            </div>
                            <div class="product-feature">
                                <i class="fas fa-check-circle"></i>
                                <span>Easy 10-minute installation</span>
                            </div>
                        </div>
                        <div class="product-showcase-price">$199.00</div>
                        
                        <!-- Shipping Calculator (Inline) -->
                        <div class="blog-shipping-calculator">
                            <label for="blogZipCode" style="display: block; margin-bottom: 0.75rem; color: #334155; font-weight: 500;">Enter Zip Code for Shipping:</label>
                            <input type="text" id="blogZipCode" placeholder="Enter zip code" maxlength="5" style="width: 100%; padding: 0.75rem; border: 2px solid #cbd5e1; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;">
                            <div id="blogShippingCost" style="display: none; margin-bottom: 1rem; padding: 0.75rem; background: #f0f9ff; border-radius: 8px; color: #1e3a8a; font-weight: 600;">
                                Shipping: $<span id="blogShippingAmount">0.00</span> | Total: $<span id="blogTotalAmount">199.00</span>
                            </div>
                        </div>
                        
                        <!-- PayPal Buttons Container -->
                        <div id="blogPaypalButtons" style="display: none; margin-top: 1rem;">
                            <div id="blogPaypalButtonContainer"></div>
                        </div>
                        
                        <button id="blogBuyButton" class="product-showcase-btn" onclick="calculateBlogShipping()" style="margin-top: 1rem; display: block; width: 100%;">
                            Calculate Shipping & Buy Now
                        </button>
                    </div>
                </div>
            </div>

            <h2>When to Call a Professional</h2>

            <p>If you've tried cleaning your cell and balancing your water chemistry, but chlorine production still doesn't improve, it's time to call a pool professional. They can:</p>

            <ul>
                <li>Test your cell's actual chlorine output with specialized equipment</li>
                <li>Identify if the issue is with the cell, the chlorinator control unit, or the wiring</li>
                <li>Help you determine if replacement is necessary or if repair is possible</li>
            </ul>

            <p>However, if you're replacing your salt cell, that's the perfect time to install Cell Shield. It's a one-time investment that protects your new $800+ cell from the same problems that killed your old one. Scroll up to see our Cell Shield product showcase above.</p>

            <h2>Final Thoughts</h2>

            <p>Most salt cell chlorine production issues are preventable. Scale buildup and high temperatures are the main culprits, and both can be addressed with proper maintenance and protection. By understanding why your salt cell stopped working and taking preventive measures, you can avoid the $800-1,000 replacement cost that catches so many pool owners off guard.</p>

            <p>Remember: regular maintenance, proper water chemistry, and protective devices like Cell Shield work together to keep your salt cell producing chlorine reliably for years. If you're dealing with a failing cell right now, focus on fixing the immediate problem. But once it's resolved, consider investing in prevention — it's the smart, cost-effective approach.</p>

            <div class="related-articles">
                <h3 class="related-articles-title">Related Articles</h3>
                <div class="related-articles-grid">
                    <a href="how-to-clean-salt-cell.html" class="related-article-card">
                        <div class="related-article-icon">
                            <i class="fas fa-spray-can"></i>
                        </div>
                        <h4>How to Clean a Salt Cell</h4>
                        <p>Step-by-step guide to safely cleaning your salt cell without damaging it</p>
                    </a>
                    <a href="how-long-do-salt-cells-last.html" class="related-article-card">
                        <div class="related-article-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h4>How Long Should a Salt Cell Last?</h4>
                        <p>The truth about salt cell lifespan and how to extend it</p>
                    </a>
                    <a href="signs-salt-cell-failing.html" class="related-article-card">
                        <div class="related-article-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h4>5 Early Signs Your Salt Cell Is Failing</h4>
                        <p>Spot warning signs before your salt cell dies completely</p>
                    </a>
                </div>
            </div>
        </article>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3>SB Pool Engineering</h3>
                    <p>Salt Water Pool Engineering</p>
                </div>
                <div class="footer-links">
                    <a href="../index.html#home">Home</a>
                    <a href="../index.html#product">Product</a>
                    <a href="index.html">Blog</a>
                    <a href="../index.html#about">About</a>
                    <a href="../index.html#contact">Contact</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 SB Pool Engineering. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=AbfjIdn2N-qPn4T6nPjVqIiFlcv1ujBadtdPknNz70qrSsTK72bj69z83kM10bkb9BlR1R7XEz5FzvE1&components=buttons&currency=USD&intent=capture&enable-funding=venmo,card&disable-funding=paylater,credit"></script>
    <script>
        // Blog-specific shipping and PayPal functions
        let blogShippingCost = 0;
        let blogShippingCalculated = false;

        function calculateBlogShipping() {
            const zipInput = document.getElementById('blogZipCode');
            const zipCode = zipInput.value.trim();
            
            if (!zipCode || !/^\d{5}$/.test(zipCode)) {
                alert('Please enter a valid 5-digit zip code');
                return;
            }

            const btn = document.getElementById('blogBuyButton');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Calculating...';
            btn.disabled = true;

            // Simulate shipping calculation (using same logic as main page)
            setTimeout(() => {
                // Use the same shipping calculation logic
                const orlandoLat = 28.5383;
                const orlandoLon = -81.3792;
                const destination = getCoordinatesFromZip(zipCode);
                let distance = 600; // default
                if (destination) {
                    const R = 3959;
                    const dLat = (destination.lat - orlandoLat) * Math.PI / 180;
                    const dLon = (destination.lon - orlandoLon) * Math.PI / 180;
                    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                              Math.cos(orlandoLat * Math.PI / 180) * Math.cos(destination.lat * Math.PI / 180) *
                              Math.sin(dLon/2) * Math.sin(dLon/2);
                    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                    distance = R * c;
                }
                
                if (distance <= 100) blogShippingCost = 8.99;
                else if (distance <= 300) blogShippingCost = 12.99;
                else if (distance <= 600) blogShippingCost = 15.99;
                else if (distance <= 1200) blogShippingCost = 19.99;
                else blogShippingCost = 24.99;
                
                blogShippingCalculated = true;

                document.getElementById('blogShippingAmount').textContent = blogShippingCost.toFixed(2);
                document.getElementById('blogTotalAmount').textContent = (199.00 + blogShippingCost).toFixed(2);
                document.getElementById('blogShippingCost').style.display = 'block';
                document.getElementById('blogBuyButton').style.display = 'none';
                document.getElementById('blogPaypalButtons').style.display = 'block';

                initializeBlogPayPal();
            }, 1500);
        }

        function initializeBlogPayPal() {
            const container = document.getElementById('blogPaypalButtonContainer');
            container.innerHTML = '';
            
            const total = 199.00 + blogShippingCost;

            if (typeof paypal !== 'undefined') {
                // Create a single button configuration that includes all funding sources
                paypal.Buttons({
                    style: {
                        layout: 'vertical',
                        color: 'blue',
                        shape: 'rect',
                        label: 'paypal',
                        height: 50,
                        tagline: false
                    },
                    createOrder: function(data, actions) {
                        return actions.order.create({
                            intent: 'CAPTURE',
                            purchase_units: [{
                                description: 'Salt Cell Shield - Professional Salt Cell Protection',
                                amount: {
                                    currency_code: 'USD',
                                    value: total.toFixed(2),
                                    breakdown: {
                                        item_total: { currency_code: 'USD', value: '199.00' },
                                        shipping: { currency_code: 'USD', value: blogShippingCost.toFixed(2) }
                                    }
                                },
                                items: [{
                                    name: 'Salt Cell Shield',
                                    description: 'Professional-grade salt cell shield',
                                    unit_amount: { currency_code: 'USD', value: '199.00' },
                                    quantity: '1',
                                    category: 'PHYSICAL_GOODS',
                                    sku: 'SCS-001'
                                }]
                            }],
                            application_context: {
                                brand_name: 'SB Pool Engineering',
                                shipping_preference: 'GET_FROM_FILE'
                            }
                        });
                    },
                    onApprove: function(data, actions) {
                        return actions.order.capture().then(function(details) {
                            alert('Payment successful! Your order has been processed.');
                            console.log('Order completed:', details);
                        });
                    },
                    onError: function(err) {
                        console.error('PayPal error:', err);
                        alert('An error occurred during payment. Please try again.');
                    }
                }).render('#blogPaypalButtonContainer');
            }
        }

        // Zip code coordinate lookup function (simplified version)
        function getCoordinatesFromZip(zipCode) {
            // Major cities lookup - simplified for blog
            const majorCities = {
                '32801': { lat: 28.5383, lon: -81.3792 }, // Orlando
                '33101': { lat: 25.7617, lon: -80.1918 }, // Miami
                '33601': { lat: 27.9506, lon: -82.4572 }, // Tampa
                '77001': { lat: 29.7604, lon: -95.3698 }, // Houston
                '75201': { lat: 32.7767, lon: -96.7970 }, // Dallas
                '90001': { lat: 33.9731, lon: -118.2479 }, // Los Angeles
                '85001': { lat: 33.4484, lon: -112.0740 }, // Phoenix
            };
            return majorCities[zipCode] || { lat: 28.5383, lon: -81.3792 }; // Default to Orlando
        }

        // Allow Enter key to calculate shipping
        document.addEventListener('DOMContentLoaded', function() {
            const zipInput = document.getElementById('blogZipCode');
            if (zipInput) {
                zipInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        calculateBlogShipping();
                    }
                });
                // Allow clicking the buy button after zip is entered
                const buyBtn = document.getElementById('blogBuyButton');
                if (buyBtn) {
                    buyBtn.addEventListener('click', calculateBlogShipping);
                }
                zipInput.addEventListener('input', function(e) {
                    e.target.value = e.target.value.replace(/[^0-9]/g, '').substring(0, 5);
                });
            }
        });
    </script>
</body>
</html>

